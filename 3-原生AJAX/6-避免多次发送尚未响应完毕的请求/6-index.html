<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>取消请求</title>
</head>
<body>
<button>请求</button>
<button>取消请求</button>
<script>
  let btns=document.getElementsByTagName('button')
  let xhr=null;
  btns[0].addEventListener('click',()=>{
    xhr=new XMLHttpRequest();
    xhr.open('GET','http://127.0.0.1:8001/test')
    xhr.onreadystatechange=function (){
      if(xhr.readyState===4){
        debugger
        if(xhr.status>=200&&xhr.status<300){
          console.log(xhr.response)
        }
      }
    }
    xhr.send()
  })
  btns[1].addEventListener('click',()=>{
    xhr.abort()
  })
</script>
</body>
</html>